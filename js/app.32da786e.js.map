{"version":3,"file":"js/app.32da786e.js","mappings":"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","sources":["webpack://proj/./src/components/App.vue","webpack://proj/./src/packages/editor-block.jsx","webpack://proj/./src/packages/useMenuDragger.js","webpack://proj/./src/packages/usefocus.js","webpack://proj/./src/packages/useBlockDragger.js","webpack://proj/./src/packages/editor.jsx","webpack://proj/./src/utils/editor-config.jsx","webpack://proj/./src/components/App.vue?45b3","webpack://proj/./src/main.js","webpack://proj/webpack/bootstrap","webpack://proj/webpack/runtime/chunk loaded","webpack://proj/webpack/runtime/compat get default export","webpack://proj/webpack/runtime/define property getters","webpack://proj/webpack/runtime/global","webpack://proj/webpack/runtime/hasOwnProperty shorthand","webpack://proj/webpack/runtime/jsonp chunk loading","webpack://proj/webpack/startup"],"sourcesContent":["<template>\n  <div class=\"app\"></div>\n     <Editor v-model=\"state\"></Editor>\n</template>\n\n<script>\nimport { ref } from 'vue';\nimport data from './data.json';\nimport Editor from '@/packages/editor';\nimport {registerConfig as config} from '@/utils/editor-config' ;\nimport { provide } from 'vue';\nconst realstate = JSON.parse(localStorage.getItem('todos'))\nconst states=ref(data)\nvar odof=false\nconst statess=realstate||states\nexport default{\n   components:{\n     Editor\n   },\n   setup(){\n     const state =ref(statess)\n     provide('config',config);//将组件的配置加入\n     return{\n       state\n     }     \n   },\n   watch:{\n     state(value){\n       localStorage.setItem('todos',JSON.stringify(value))\n       \n     }\n   }\n }\n</script>\n\n<style>\n</style>","import { computed, defineComponent, inject, onMounted,ref } from \"vue\";\r\n\r\nexport default defineComponent({\r\n     props:{\r\n         block:{type:Object}\r\n     },\r\n     setup(props){\r\n        const blockStyles =computed(()=>({\r\n              top:`${props.block.top}px`,\r\n              left:`${props.block.left}px`,\r\n              zIndex:`${props.block.zIndex}`\r\n        }));\r\n        const config=inject('config');\r\n        const blockRef=ref(null);\r\n        onMounted(()=>{\r\n           let {offsetWidth,offsetHeight}= blockRef.value;\r\n           if(props.block.alignCenter){\r\n            props.block.left=props.block.left-offsetWidth/2;\r\n            props.block.top=props.block.top-offsetHeight/2;\r\n            props.block.alignCenter=false;\r\n           }\r\n           props.block.width=offsetWidth;\r\n           props.block.height=offsetHeight;\r\n        })\r\n        return()=>\r\n        {     //通过block的key属性获取对应的key\r\n            const componment=config.componmentMap[props.block.key];\r\n            //获取key的render函数\r\n            const RenderComponment=componment.render();\r\n            return <div class=\"editor-block\" style={blockStyles.value} ref={blockRef}>\r\n                {RenderComponment}\r\n            </div>\r\n        }\r\n     }\r\n    })","export function useMenuDragger(containerRef,data){\r\nlet currentComponent=null;\r\n            const dragenter=(e)=>{\r\n                     e.dataTransfer.dropEffect='move';\r\n            }\r\n            const dragover=(e)=>{\r\n                    e.preventDefault();         \r\n            }\r\n            const dragleave=(e)=>{\r\n                  e.dataTransfer.dropEffect='none';\r\n            }\r\n            const drop=(e)=>{\r\n                  console.log(currentComponent);\r\n                  let blocks = data.value.blocks;\r\n                  data.value={...data.value,blocks:[\r\n                    ...blocks,\r\n                    {\r\n                        top:e.offsetY,\r\n                        left:e.offsetX,\r\n                        zIndex:1,\r\n                        key:currentComponent.key,\r\n                        alignCenter:true\r\n                    }\r\n                  ]\r\n                  }\r\n                  currentComponent=null;\r\n            }\r\n            const dragstart =(e,component)=>{\r\n                //进入元素，经过必须要组织默认行为4\r\n                //离开元素的时候增加一个禁用标识\r\n                 containerRef.value.addEventListener('dragenter',dragenter)\r\n                 containerRef.value.addEventListener('dragover',dragover)\r\n                 containerRef.value.addEventListener('dragleave',dragleave)\r\n                 containerRef.value.addEventListener('drop',drop)\r\n                 currentComponent=component\r\n            }\r\n            const dragend=(e)=>{\r\n                containerRef.value.removeEventListener('drageneter',dragenter)\r\n                containerRef.value.removeEventListener('dragover',dragover)\r\n                containerRef.value.removeEventListener('dragleave',dragleave)\r\n                containerRef.value.removeEventListener('drop',drop)\r\n            }\r\n            return{dragstart,dragend}\r\n        }","import {computed,ref} from 'vue'\r\n\r\nexport function usefocus(data,callback){\r\n    const selectIndex=ref(-1);\r\n    const lastIndexBlock=computed(()=>data.value.blocks[selectIndex.value])\r\n    const focusData=computed(()=>{\r\n        let focus=[];\r\n        let unfocused=[];\r\n        data.value.blocks.forEach(block=>(block.focus?focus:unfocused).push(block));\r\n        return{focus,unfocused}\r\n    });\r\n    const clearBlockfocus=()=>{\r\n        data.value.blocks.forEach(block => block.focus=false);\r\n    }\r\n    const blockMousedown=(e,block,index)=>{\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        //规定一个focus属性\r\n        if(e.shiftKey){\r\n          block.focus=!block.focus\r\n        }else{                \r\n        if(!block.focus){\r\n            clearBlockfocus();\r\n            block.focus=true;\r\n        }\r\n        else{\r\n            block.focus=false;\r\n        }\r\n    }\r\n    selectIndex.value=index;\r\n    callback(e)\r\n    }\r\n    return {\r\n        blockMousedown,\r\n        focusData,\r\n        lastIndexBlock\r\n    }\r\n}","import { linkEmits } from \"element-plus\";\r\nimport { reactive } from \"vue\";\r\n\r\nexport function useBlockDragger(focusData,lastIndexBlock){\r\n            let  dragState={\r\n                startX:0,\r\n                startY:0\r\n            }\r\n            let markLine=reactive(\r\n               {\r\n                x:null,\r\n                y:null\r\n               }\r\n            )\r\n            const mousedown=(e)=>{\r\n                const {width:BWidth,height:BHeight}= lastIndexBlock.value\r\n                dragState={\r\n                startX:e.clientX,\r\n                startY:e.clientY,//记录每个选中位置\r\n                startLeft:lastIndexBlock.value.left,\r\n                startTop:lastIndexBlock.value.top,\r\n                startPos:focusData.value.focus.map(({top,left})=>({top,left})),\r\n                lines:(()=>{\r\n                    const {unfocused}=focusData.value;\r\n                    \r\n                    //console.log(focusData.value);\r\n                       let lines={x:[],y:[]};//获取其他选中的位置以获得辅助线\r\n                       unfocused.forEach((block)=>{\r\n                       const {top:ATop,left:ALeft,width:AWidth,height:AHeight}=block;//横线处理函数\r\n                       lines.y.push({showTop:ATop,top:ATop});\r\n                       lines.y.push({showTop:ATop,top:ATop-BHeight});\r\n                       lines.y.push({showTop:ATop+AHeight/2,top:ATop+AHeight/2-BHeight/2});\r\n                       lines.y.push({showTop:ATop+AHeight,top:ATop+AHeight});\r\n                       lines.y.push({showTop:ATop+AHeight,top:ATop+AHeight-BHeight});\r\n                       lines.x.push({showLeft:ALeft,left:ALeft});\r\n                       lines.x.push({showLeft:ALeft+AWidth,left:ALeft+AWidth});\r\n                       lines.x.push({showLeft:ALeft+AWidth/2,left:ALeft+AWidth/2-BWidth/2});\r\n                       lines.x.push({showLeft:ALeft+AWidth,left:ALeft+AWidth-BWidth});\r\n                       lines.x.push({showLeft:ALeft,left:ALeft-BWidth});\r\n                    })\r\n                    return lines\r\n               })()\r\n            }\r\n                document.addEventListener('mousemove',mousemove);\r\n                document.addEventListener('mouseup',mouseup)\r\n            }\r\n            const mousemove=(e)=>{\r\n                let {clientX:moveX,clientY:moveY}=e;\r\n                //计算最新的left，top\r\n                let y=null;\r\n                let x=null;\r\n                let left=moveX-dragState.startX+dragState.startLeft;\r\n                let top=moveY-dragState.startY+dragState.startTop\r\n                for(let i=0;i<dragState.lines.y.length;i++){\r\n                    const {top:t,showTop:s}=dragState.lines.y[i];\r\n                    if(Math.abs(t-top)<5){\r\n                               y=s;\r\n                               moveY=dragState.startY-dragState.startTop+t;\r\n                               //实现贴边\r\n                               break;//找到一个就跳\r\n                    }\r\n                }\r\n                for(let i=0;i<dragState.lines.x.length;i++){\r\n                    const {left:l,showLeft:s}=dragState.lines.x[i];\r\n                    if(Math.abs(l-left)<5){\r\n                               x=s;\r\n                               moveX=dragState.startX-dragState.startLeft+l;\r\n                               //实现贴边\r\n                               break;//找到一个就跳\r\n                    }\r\n                }\r\n                markLine.x=x;\r\n                markLine.y=y;\r\n\r\n                let durX=moveX-dragState.startX;\r\n                let durY=moveY-dragState.startY;\r\n                focusData.value.focus.forEach((block,idx)=>{\r\n                        block.top=dragState.startPos[idx].top+durY;\r\n                        block.left=dragState.startPos[idx].left+durX;\r\n                }\r\n                )\r\n            }   \r\n            const mouseup=(e)=>{\r\n                document.removeEventListener('mousemove',mousemove);\r\n                document.removeEventListener('mouseup',mouseup);\r\n            } \r\n            return{\r\n                mousedown,\r\n                markLine\r\n            }\r\n        }","import { computed, defineComponent, handleError, inject,ref, withCtx } from \"vue\";\r\nimport \"./editor.scss\";\r\nimport editorBlock from \"./editor-block\";\r\nimport { componentSizeMap } from \"element-plus\";\r\nimport deepcopy from \"deepcopy\";\r\nimport { useMenuDragger } from \"./useMenuDragger\";\r\nimport { useFocus } from \"@vueuse/core\";\r\nimport { usefocus } from \"./usefocus\";\r\nimport { useBlockDragger } from \"./useBlockDragger\";\r\nexport default defineComponent(\r\n    {   \r\n        props: {\r\n            modelValue: { type:Object }\r\n        },\r\n        emits:['update:modelValue'],//要触发事件\r\n        setup(props,ctx){\r\n            const data = computed({\r\n                get(){\r\n                    return props.modelValue\r\n                },\r\n                set(newValue){\r\n                    ctx.emit('update:modelValue',deepcopy(newValue))\r\n                }\r\n            });\r\n            const containerStyles =computed(()=>({\r\n                width:data.value.container.width+'px',\r\n                height:data.value.container.height+'px'\r\n            }))\r\n            const config = inject('config') ;\r\n            const containerRef=ref(null);\r\n            //拖拽菜单元素\r\n            const {dragstart,dragend} =useMenuDragger(containerRef,data)\r\n            //拖拽获取焦点\r\n            let {  blockMousedown,focusData,lastIndexBlock}=usefocus(data,(e)=>{\r\n            mousedown(e);\r\n            }); \r\n            let{mousedown,markLine}=useBlockDragger(focusData,lastIndexBlock);\r\n            const  clearBlockfocus=(e)=>{\r\n                data.value.blocks.forEach(block => block.focus=false);\r\n            }\r\n            const containerMousedown=()=>{\r\n                clearBlockfocus();//点击容器让他失去焦点\r\n\r\n            }\r\n            const buttons=[\r\n                {label:'撤销',icon:'icon-back',handler:()=>console.log(撤销)},\r\n                {label:'重做',icon:'icon-back',handler:()=>console.log(撤销)},\r\n            ]\r\n            //console.log(config)\r\n            return() => <div class=\"editor\">\r\n              <div class=\"editor-left\">\r\n                {\r\n                    config.componmentlist.map(component=>(\r\n                        <div class=\"editor-left-item\" draggable\r\n                        onDragstart={e=>dragstart(e,component)}>\r\n                                \r\n                            <span>{component.label}</span>\r\n                            <div>{component.preview()}</div>\r\n                        </div>\r\n                    ))\r\n                }\r\n              </div>\r\n              <div class=\"editor-top\">{buttons.map((btn,index)=>{\r\n                return <div class=\"editor-top-button\" onClick={btn.handler}>\r\n                <i class={btn.icon}></i>\r\n                <i class={btn.label}></i>\r\n                </div>\r\n              })}</div>\r\n              <div class=\"editor-right\">删除区</div>\r\n              <div class=\"editor-container\">\r\n                {/*产生滚动条*/}\r\n                \r\n                    <div class=\"editor-container-canvas\">\r\n\r\n                       {/* */}\r\n                       <div class=\"editor-container-canvas__content\" style={containerStyles.value}ref={containerRef} onMousedown={containerMousedown}> \r\n                            {\r\n                                (data.value.blocks.map((block,index)=>(\r\n                                    \r\n                                 <editorBlock class={block.focus ? \"editor-block-focus\":\"\"} block={block} onMousedown={(e)=>blockMousedown(e,block,index)}>sdjsd</editorBlock>\r\n                               )))\r\n                            }\r\n                       {markLine.x!==null&&<div class=\"line-x\" style={{left:markLine.x+'px'}}></div>}\r\n                       {markLine.y!==null&&<div class=\"line-y\" style={{top:markLine.y+'px'}}></div>}\r\n                       </div>\r\n                    </div>\r\n\r\n              </div>\r\n              </div>//相当于返回后面的值\r\n        }\r\n    }\r\n)","//列表区显示所有物料\r\n//key对应组件映射关系\r\nimport {ElButton} from 'element-plus'\r\nimport {ElInput} from 'element-plus'\r\nfunction createEditorConfig(){\r\n    const componmentlist=[];\r\n    const componmentMap={};\r\n\r\n    return{\r\n        componmentMap,\r\n        componmentlist,\r\n        register:(componment)=>{\r\n            componmentlist.push(componment);\r\n            componmentMap[componment.key]=componment;\r\n        }\r\n    }\r\n}\r\nexport let registerConfig =createEditorConfig();\r\n\r\nregisterConfig.register({\r\n      label:'文本',\r\n      preview:()=>'预览文本',\r\n      render:()=>'渲染文本',\r\n      key:'text'\r\n})\r\nregisterConfig.register({\r\n    label:'按钮',\r\n    preview:()=><ElButton>预览按钮</ElButton>,\r\n    render:()=><ElButton>渲染按钮</ElButton>,\r\n    key:'button'\r\n})\r\nregisterConfig.register({\r\n    label:'输入框',\r\n    preview:()=><ElInput placeholder=\"预览输入框\"></ElInput>,\r\n    render:()=><ElInput placeholder=\"渲染输入框\"></ElInput>,\r\n    key:'input'\r\n});","import { render } from \"./App.vue?vue&type=template&id=e27d59f2\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\三木\\\\proj\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './components/App.vue'\nimport 'element-plus/dist/index.css'\ncreateApp(App).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkproj\"] = self[\"webpackChunkproj\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(1434); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createElementVNode","class","_hoisted_1","_createVNode","_component_Editor","$setup","$event","defineComponent","props","block","type","Object","setup","blockStyles","computed","top","left","zIndex","config","inject","blockRef","ref","onMounted","offsetWidth","offsetHeight","value","alignCenter","width","height","componment","componmentMap","key","RenderComponment","render","useMenuDragger","containerRef","data","currentComponent","dragenter","e","dataTransfer","dropEffect","dragover","preventDefault","dragleave","drop","console","log","blocks","offsetY","offsetX","dragstart","component","addEventListener","dragend","removeEventListener","usefocus","callback","selectIndex","lastIndexBlock","focusData","focus","unfocused","forEach","push","clearBlockfocus","blockMousedown","index","stopPropagation","shiftKey","useBlockDragger","dragState","startX","startY","markLine","reactive","x","y","mousedown","BWidth","BHeight","clientX","clientY","startLeft","startTop","startPos","map","lines","ATop","ALeft","AWidth","AHeight","showTop","showLeft","document","mousemove","mouseup","moveX","moveY","i","length","t","s","Math","abs","l","durX","durY","idx","modelValue","emits","ctx","get","set","newValue","emit","deepcopy","containerStyles","container","containerMousedown","buttons","label","icon","handler","撤销","componmentlist","preview","btn","createEditorConfig","register","registerConfig","realstate","JSON","parse","localStorage","getItem","states","statess","components","Editor","state","provide","watch","setItem","stringify","__exports__","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","keys","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","globalThis","this","Function","window","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}